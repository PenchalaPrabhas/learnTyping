<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random Character Typing with Timer</title>
    <style>
        body {
            background-color: black;
            color: white;
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 100px;
        }
        .container {
            font-size: 24px;
        }
        .character {
            font-size: 50px;
            margin: 20px;
            padding: 10px;
            transition: color 0.5s;
            display: inline-block;
        }
        .info {
            margin-top: 20px;
        }
        /* Button styling */
        .shadow__btn {
            padding: 10px 20px;
            border: none;
            font-size: 17px;
            color: #fff;
            border-radius: 7px;
            letter-spacing: 4px;
            font-weight: 700;
            text-transform: uppercase;
            transition: 0.5s;
            background: rgb(0,140,255);
            box-shadow: 0 0 25px rgb(0,140,255);
        }

        .shadow__btn:hover {
            box-shadow: 0 0 5px rgb(0,140,255),
                        0 0 25px rgb(0,140,255),
                        0 0 50px rgb(0,140,255),
                        0 0 100px rgb(0,140,255);
        }

        .timer {
            font-size: 20px;
            margin-top: 10px;
            color: yellow;
        }

        .current-time {
            font-size: 16px;
            color: lightgray;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="character" id="randomChar"></div>
    <div class="info">
        <p>Words Per Minute (WPM): <span id="wpm">0</span></p>
        <p>Total Correct Characters: <span id="totalChars">0</span></p>
        <p>Total Wrong Characters: <span id="wrongChars">0</span></p>
    </div>
    <button class="shadow__btn" id="pauseBtn">Pause</button>
    <div class="timer" id="typingTimer">Timer: 00:00:00</div>
    <div class="current-time">
        Current Time: <span id="currentTime"></span>
    </div>
</div>

<script>
    const characters = "abcdefghijklmnopqrstuvwxyz,./";
    let totalCharacters = 0;
    let correctCharacters = 0;
    let wrongCharacters = 0;
    let typingStartTime;
    let paused = false;
    let typingStarted = false;
    let pausedTime = 0;
    let totalPausedTime = 0;
    let timerInterval;

    // Function to generate random light color
    function getRandomLightColor() {
        const hue = Math.floor(Math.random() * 360); // Random hue
        const saturation = 100; // Full saturation
        const lightness = Math.floor(Math.random() * 40) + 60; // Light colors (60-100%)
        return `hsl(${hue}, ${saturation}%, ${lightness}%)`;
    }

    function getRandomCharacter() {
        const randomIndex = Math.floor(Math.random() * characters.length);
        return characters[randomIndex];
    }

    function updateCharacter() {
        const randomChar = getRandomCharacter();
        const color = getRandomLightColor(); // Get random light color
        document.getElementById("randomChar").textContent = randomChar;
        document.getElementById("randomChar").style.color = color;
    }

    function updateTime() {
        const currentTime = new Date();
        const timeString = currentTime.toLocaleTimeString();
        document.getElementById("currentTime").textContent = timeString;
    }

    function calculateWPM() {
        const currentTime = new Date();
        const timeElapsed = (currentTime - typingStartTime - totalPausedTime) / 1000 / 60; // in minutes
        const wpm = Math.round((correctCharacters / 5) / timeElapsed);
        document.getElementById("wpm").textContent = isNaN(wpm) ? 0 : wpm;
    }

    function startTypingTimer() {
        if (!typingStarted) {
            typingStarted = true;
            typingStartTime = new Date();
            setInterval(updateTypingTimer, 1000);
        }
    }

    function updateTypingTimer() {
        if (!paused && typingStarted) {
            const currentTime = new Date();
            const timeElapsed = new Date(currentTime - typingStartTime - totalPausedTime);
            const hours = String(timeElapsed.getUTCHours()).padStart(2, '0');
            const minutes = String(timeElapsed.getUTCMinutes()).padStart(2, '0');
            const seconds = String(timeElapsed.getUTCSeconds()).padStart(2, '0');
            document.getElementById("typingTimer").textContent = `Timer: ${hours}:${minutes}:${seconds}`;
        }
    }

    function keyPressHandler(event) {
        if (paused) return;

        const typedChar = String.fromCharCode(event.which).toLowerCase();
        const displayedChar = document.getElementById("randomChar").textContent;

        if (!typingStarted) {
            startTypingTimer();
        }

        totalCharacters++;

        if (typedChar === displayedChar) {
            correctCharacters++;
            document.getElementById("totalChars").textContent = correctCharacters;
            calculateWPM();
            updateCharacter();
        } else {
            wrongCharacters++;
            document.getElementById("wrongChars").textContent = wrongCharacters;
        }
    }

    // Pause/Resume Button functionality
    document.getElementById("pauseBtn").addEventListener("click", function() {
        paused = !paused; // Toggle pause state
        if (paused) {
            document.getElementById("randomChar").textContent = ""; // Clear character display
            pausedTime = new Date();
            this.textContent = "Resume"; // Change button text
        } else {
            totalPausedTime += new Date() - pausedTime; // Add the pause time to totalPausedTime
            updateCharacter(); // Show character again
            this.textContent = "Pause"; // Change button text back
        }
    });

    // Update random character and time initially
    updateCharacter();
    updateTime();

    // Update time every second
    timerInterval = setInterval(updateTime, 1000);

    // Listen for key press to count total characters
    document.addEventListener("keypress", keyPressHandler);
</script>

</body>
</html>
